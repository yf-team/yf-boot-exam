import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-d6cd8ae8.js";import{d as a,r as l,I as t,y as s,z as o,m as d,o as u,i as n,w as r,g as p,f as i,s as m,p as c,a as f,a6 as v,K as _,_ as y}from"./index-6345b1a2.js";import{t as h}from"./index-5ea96d40.js";import{l as g,a as k}from"./index-7aa57948.js";/* empty css                */import"./el-tooltip-4ed993c7.js";/* empty css                  */const x={class:"dialog-footer"},j=y(a({__name:"Grant",props:{modelValue:{type:Boolean,default:!1},roleId:{type:String,default:""}},emits:["update:modelValue"],setup(a,{emit:y}){const j=a,I=l(),V=l(!1);t((()=>j.roleId),(e=>{e&&T()})),t((()=>j.modelValue),(e=>{V.value=e}));const w=l(!1),C=l(!1),b=l([]),K=l([]),T=async()=>{w.value=!0,K.value=[],await h().then((e=>{b.value=e.data})),await g({id:j.roleId}).then((e=>{K.value=e.data})),w.value=!1},z=()=>{V.value=!1,y("update:modelValue",!1)},B=()=>{C.value=!0;const e=I.value.getCheckedKeys(!1);k({id:j.roleId,menuIds:e}).then((()=>{_({showClose:!0,message:"授权保存成功！",type:"success"}),C.value=!1,z()}))},G=e=>2===e.menuType&&e.children&&e.children.length>0?"is-menu":null;return s((()=>{T()})),(a,l)=>{const t=o("el-button"),s=o("el-dialog"),_=d("loading");return u(),n(s,{modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=e=>V.value=e),title:"角色授权",width:"50%","before-close":z},{footer:r((()=>[p("span",x,[i(t,{onClick:z},{default:r((()=>[m("取消")])),_:1}),i(t,{type:"primary",onClick:B,loading:C.value},{default:r((()=>[m("保存")])),_:1},8,["loading"])])])),default:r((()=>[c((u(),n(f(e),null,{default:r((()=>[i(f(v),{ref_key:"treeRef",ref:I,data:b.value,"default-checked-keys":K.value,"show-checkbox":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1,props:{class:G,label:"metaTitle"}},null,8,["data","default-checked-keys","props"])])),_:1})),[[_,w.value]])])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-c14f7f0a"]]);export{j as default};
