import{d as e,b as l,O as a,u as o,e as r,r as s,I as t,z as i,o as n,i as d,w as u,f as c,g as p,t as m,a as v,s as f,c as g,A as h,P as w,k as b}from"./index-6345b1a2.js";import{u as y}from"./useValidator-62a74150.js";import{I as V}from"./InputCaptcha-7c9be22d.js";const _={class:"text-2xl font-bold text-center w-[100%]"},k={class:"flex justify-between items-center w-[100%]"},x={class:"w-[100%]"},z={key:0,class:"w-[100%] mt-15px"},C={class:"flex justify-between w-[100%]"},j="#999",I="var(--el-color-primary)",P=e({__name:"LoginForm",emits:["to-register"],setup(e,{emit:P}){const{required:U}=y(),N=l(),q=a(),{currentRoute:R,replace:A}=o(),{t:F}=b(),J=r((()=>N.getSiteInfo)),K=s({userName:"",password:"",captchaKey:"",captchaValue:""}),L=s(),O={username:[U()],password:[U()],captchaValue:[U()]},S=s(!1),T=s(!1),B=s("");t((()=>R.value),(e=>{var l;B.value=null==(l=null==e?void 0:e.query)?void 0:l.redirect}),{immediate:!0});const D=()=>{P("to-register")};return(e,l)=>{const a=i("el-form-item"),o=i("el-input"),r=i("el-checkbox"),s=i("el-link"),t=i("el-button"),b=i("el-divider"),y=i("el-form");return n(),d(y,{ref_key:"formRef",ref:L,model:K.value,rules:O,class:"dark:border-1 dark:border-[var(--el-border-color)] dark:border-solid; w-[100%]","hide-required-asterisk":"","label-position":"top",size:"large"},{default:u((()=>[c(a,null,{default:u((()=>[p("h2",_,m(v(F)("login.loginTitle")),1)])),_:1}),c(a,{label:v(F)("login.username"),prop:"userName"},{default:u((()=>[c(o,{modelValue:K.value.userName,"onUpdate:modelValue":l[0]||(l[0]=e=>K.value.userName=e),placeholder:v(F)("login.usernamePlaceholder"),clearable:"",type:"text"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),c(a,{label:v(F)("login.password"),prop:"password"},{default:u((()=>[c(o,{modelValue:K.value.password,"onUpdate:modelValue":l[1]||(l[1]=e=>K.value.password=e),placeholder:v(F)("login.passwordPlaceholder"),"show-password":!0,clearable:"",type:"password"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),c(a,{label:v(F)("login.code"),prop:"captchaValue"},{default:u((()=>[c(V,{modelValue:K.value,"onUpdate:modelValue":l[2]||(l[2]=e=>K.value=e),placeholder:v(F)("login.codePlaceholder"),style:{width:"100%"}},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),c(a,null,{default:u((()=>[p("div",k,[c(r,{modelValue:S.value,"onUpdate:modelValue":l[3]||(l[3]=e=>S.value=e),label:v(F)("login.remember"),size:"small"},null,8,["modelValue","label"]),c(s,{underline:!1,type:"primary"},{default:u((()=>[f(m(v(F)("login.forgetPassword")),1)])),_:1})])])),_:1}),c(a,null,{default:u((()=>{var e,a;return[p("div",x,[c(t,{loading:T.value,class:"w-[100%]",type:"primary",onClick:l[4]||(l[4]=e=>(async e=>{e&&await(null==e?void 0:e.validate((e=>{if(e){T.value=!0;const e=v(K);q.login(e).then((()=>{T.value=!1,A(B.value||"/")})).catch((()=>{T.value=!1}))}})))})(L.value))},{default:u((()=>[f(m(v(F)("login.login")),1)])),_:1},8,["loading"])]),(null==(a=null==(e=J.value)?void 0:e.props)?void 0:a.userReg)?(n(),g("div",z,[c(t,{class:"w-[100%]",onClick:D},{default:u((()=>[f(m(v(F)("login.noUser")),1)])),_:1})])):h("",!0)]})),_:1}),c(a,{style:{display:"none"}},{default:u((()=>[c(b,{"content-position":"center"},{default:u((()=>[f("其它登录方式")])),_:1}),p("div",C,[c(v(w),{color:j,hoverColor:I,size:30,class:"cursor-pointer ant-icon",icon:"ant-design:github-filled"}),c(v(w),{color:j,hoverColor:I,size:30,class:"cursor-pointer ant-icon",icon:"ant-design:wechat-filled"}),c(v(w),{color:j,hoverColor:I,size:30,class:"cursor-pointer ant-icon",icon:"ant-design:alipay-circle-filled"}),c(v(w),{color:j,hoverColor:I,size:30,class:"cursor-pointer ant-icon",icon:"ant-design:weibo-circle-filled"})])])),_:1})])),_:1},8,["model"])}}});export{P as _};
