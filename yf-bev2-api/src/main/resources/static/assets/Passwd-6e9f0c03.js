import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-d93320da.js";import{d as a,O as l,am as s,u as o,r as t,M as r,z as u,o as d,i as p,w as n,f as m,g as f,s as i,a as c,K as _}from"./index-20708d06.js";import{p as w}from"./index-846cf534.js";import"./el-tooltip-4ed993c7.js";/* empty css                  */const v=a({__name:"Passwd",setup(a){const v=l(),P=s(),{replace:g}=o(),V=t({}),y=t(),b=r({oldPass:[{required:!0,message:"旧密码必须输入",trigger:"blur"}],newPass:[{required:!0,message:"新的密码必须输入",trigger:"blur"}],confirmPass:[{validator:(e,a,l)=>{""===a?l(new Error("请输入确认密码！")):a!==V.value.newPass?l(new Error("两次密码输入不一致！")):l()},required:!0,trigger:"blur"}]}),h=async()=>{v.logout().then((()=>{P.delAllViews(),g({name:"Login"})})).catch((()=>{}))};return(a,l)=>{const s=u("el-input"),o=u("el-form-item"),t=u("el-col"),r=u("el-row"),v=u("el-form"),P=u("el-button");return d(),p(c(e),null,{default:n((()=>[m(v,{ref_key:"formRef",ref:y,model:V.value,rules:b,"label-width":"120px"},{default:n((()=>[m(r,{gutter:20},{default:n((()=>[m(t,{span:24},{default:n((()=>[m(o,{label:"旧的密码",prop:"oldPass"},{default:n((()=>[m(s,{modelValue:V.value.oldPass,"onUpdate:modelValue":l[0]||(l[0]=e=>V.value.oldPass=e),autocomplete:"off",type:"password"},null,8,["modelValue"])])),_:1})])),_:1}),m(t,{span:24},{default:n((()=>[m(o,{label:"新的密码",prop:"newPass"},{default:n((()=>[m(s,{modelValue:V.value.newPass,"onUpdate:modelValue":l[1]||(l[1]=e=>V.value.newPass=e),autocomplete:"off",type:"password"},null,8,["modelValue"])])),_:1})])),_:1}),m(t,{span:24},{default:n((()=>[m(o,{label:"确认密码",prop:"confirmPass"},{default:n((()=>[m(s,{modelValue:V.value.confirmPass,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value.confirmPass=e),autocomplete:"off",type:"password"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"]),f("div",null,[m(P,{type:"primary",onClick:l[3]||(l[3]=e=>{var a;(a=y.value)&&a.validate((e=>{if(e){const e=c(V);w(e).then((e=>{e.success&&(_({showClose:!0,message:"修改成功，即将重新登录！",type:"success"}),setTimeout(h,2e3))}))}}))})},{default:n((()=>[i("保存")])),_:1})])])),_:1})}}});export{v as default};
