import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-d93320da.js";import{_ as l}from"./DataTable.vue_vue_type_script_setup_true_lang-0f422246.js";import{d as t,u as a,r as o,M as r,z as i,o as p,i as u,w as s,f as d,a as n,s as m,g as c,K as _}from"./index-20708d06.js";import{d as f,a as v}from"./index-92fe755e.js";import{_ as b}from"./DictListSelect.vue_vue_type_script_setup_true_lang-9024d082.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 */import"./index-77bd7a66.js";const g={class:"dialog-footer"},y=t({__name:"Repo",setup(t){const{push:y}=a();let V=o({current:1,size:10,params:{title:""}}),j=o({listUrl:"/api/exam/repo/repo/paging",delUrl:"/api/exam/repo/repo/delete",add:{enable:!0,permission:["repo:repo:add"]},edit:{enable:!0,permission:["repo:repo:edit"]},del:{enable:!0,permission:["repo:repo:delete"]}});const x=o(),h=o(!1),w=o({title:"",catId:""}),C=o(),I=r({title:[{required:!0,message:"题库名称不能为空",trigger:"blur"}],catId:[{required:!0,message:"题库分类不能为空",trigger:"blur"}]}),U=()=>{h.value=!1},k=e=>{f({id:e.id}).then((e=>{w.value=e.data})),h.value=!0};return(t,a)=>{const o=i("el-input"),r=i("el-table-column"),f=i("el-button"),q=i("el-form-item"),T=i("el-form"),z=i("el-dialog");return p(),u(n(e),null,{default:s((()=>[d(n(l),{ref_key:"table",ref:x,options:n(j),query:n(V),onOnAdd:a[1]||(a[1]=e=>{return l=C.value,h.value=!0,w.value={},void(null==l||l.resetFields());var l}),onOnEdit:k},{search:s((()=>[d(o,{modelValue:n(V).params.title,"onUpdate:modelValue":a[0]||(a[0]=e=>n(V).params.title=e),class:"filter-item",placeholder:"搜索题库"},null,8,["modelValue"])])),columns:s((()=>[d(r,{type:"selection",width:"50px"}),d(r,{label:"题库名称",prop:"title"}),d(r,{label:"题库分类",prop:"catId_dictText"}),d(r,{align:"center",label:"题目数量",prop:"quCount"}),d(r,{align:"center",label:"创建人",prop:"createBy_dictText"}),d(r,{align:"center",label:"创建时间",prop:"createTime"}),d(r,{align:"center",label:"操作",width:"180px"},{default:s((({row:e})=>[d(f,{icon:"Setting",type:"primary",onClick:l=>{return t=e.id,void y({name:"Qu",query:{repoId:t}});var t}},{default:s((()=>[m("试题管理")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["options","query"]),d(z,{modelValue:h.value,"onUpdate:modelValue":a[6]||(a[6]=e=>h.value=e),"before-close":U,title:"题库管理",width:"30%"},{footer:s((()=>[c("span",g,[d(f,{onClick:a[4]||(a[4]=e=>h.value=!1)},{default:s((()=>[m("取消")])),_:1}),d(f,{type:"primary",onClick:a[5]||(a[5]=e=>{var l;(l=C.value)&&(null==l||l.validate((e=>{if(e){const e=n(w);v(e).then((()=>{_({showClose:!0,message:"操作成功！",type:"success"}),x.value.reload(),h.value=!1}))}})))})},{default:s((()=>[m("保存")])),_:1})])])),default:s((()=>[d(T,{ref_key:"formRef",ref:C,model:w.value,rules:I,"label-position":"top","label-width":"120px"},{default:s((()=>[d(q,{label:"题库名称",prop:"title"},{default:s((()=>[d(o,{modelValue:w.value.title,"onUpdate:modelValue":a[2]||(a[2]=e=>w.value.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),d(q,{label:"题库分类",prop:"catId"},{default:s((()=>[d(n(b),{modelValue:w.value.catId,"onUpdate:modelValue":a[3]||(a[3]=e=>w.value.catId=e),"dic-code":"repo_catalog"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])),_:1})}}});export{y as default};
