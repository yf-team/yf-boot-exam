import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-d93320da.js";import{_ as l}from"./DataTable.vue_vue_type_script_setup_true_lang-0f422246.js";import{d as a,r as t,M as o,z as s,o as u,i as r,w as d,f as p,a as m,s as i,g as n,K as _}from"./index-20708d06.js";import{d as f,s as v}from"./index-846cf534.js";import{_ as c}from"./RoleSelect.vue_vue_type_script_setup_true_lang-88722ddb.js";import{_ as V}from"./DepartSelect.vue_vue_type_script_setup_true_lang-18e1a3e6.js";import{F as b}from"./FileUploader-7122b3d5.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 */import"./index-2f88eca2.js";import"./index-e4a1f0b0.js";import"./v4-ba5d26a9.js";const y={class:"dialog-footer"},g=a({__name:"User",setup(a){let g=t({current:1,size:10,params:{title:"",deptCode:"",roleIds:[]}}),U=t({listUrl:"/api/sys/user/paging",delUrl:"/api/sys/user/delete",add:{enable:!0,permission:["sys:user:add"]},edit:{enable:!0,permission:["sys:user:edit"]},del:{enable:!0,permission:["sys:user:delete"]},batch:[{key:"state",label:"启用",params:{state:0},action:"/api/sys/user/state"},{key:"state",label:"禁用",params:{state:1},action:"/api/sys/user/state"}]});const j=t(),w=t(!1),C=t({}),N=t(),h=o({roleName:[{required:!0,message:"角色名称必须输入",trigger:"blur"}],dataScope:[{required:!0,message:"数据权限必须选择",trigger:"blur"}],roleLevel:[{required:!0,message:"角色级别不能为空",trigger:"blur"}]}),x=()=>{w.value=!1},k=e=>{f({id:e.id}).then((e=>{C.value=e.data})),w.value=!0};return(a,t)=>{const o=s("el-input"),f=s("el-table-column"),q=s("el-tag"),F=s("el-form-item"),I=s("el-col"),S=s("el-row"),T=s("el-form"),z=s("el-button"),D=s("el-dialog");return u(),r(m(e),null,{default:d((()=>[p(m(l),{ref_key:"table",ref:j,options:m(U),query:m(g),onOnAdd:t[3]||(t[3]=e=>{return l=N.value,w.value=!0,C.value={},void(null==l||l.resetFields());var l}),onOnEdit:k},{search:d((()=>[p(V,{modelValue:m(g).params.deptCode,"onUpdate:modelValue":t[0]||(t[0]=e=>m(g).params.deptCode=e),class:"filter-item"},null,8,["modelValue"]),p(c,{modelValue:m(g).params.roleIds,"onUpdate:modelValue":t[1]||(t[1]=e=>m(g).params.roleIds=e),class:"filter-item",title:"搜索角色"},null,8,["modelValue"]),p(o,{modelValue:m(g).params.userName,"onUpdate:modelValue":t[2]||(t[2]=e=>m(g).params.userName=e),class:"filter-item",clearable:"",placeholder:"姓名/账号",style:{width:"200px"}},null,8,["modelValue"])])),columns:d((()=>[p(f,{type:"selection",width:"50px"}),p(f,{label:"用户名",prop:"userName"}),p(f,{label:"姓名",prop:"realName"}),p(f,{label:"所属部门",prop:"deptCode_dictText"}),p(f,{label:"角色",prop:"roleNames"}),p(f,{align:"center",label:"状态",width:"180px"},{default:d((e=>[0===e.row.state?(u(),r(q,{key:0,type:"success"},{default:d((()=>[i("正常")])),_:1})):(u(),r(q,{key:1,type:"danger"},{default:d((()=>[i("禁用")])),_:1}))])),_:1})])),_:1},8,["options","query"]),p(D,{modelValue:w.value,"onUpdate:modelValue":t[14]||(t[14]=e=>w.value=e),"before-close":x,title:"用户管理",width:"50%"},{footer:d((()=>[n("span",y,[p(z,{onClick:t[12]||(t[12]=e=>w.value=!1)},{default:d((()=>[i("取消")])),_:1}),p(z,{type:"primary",onClick:t[13]||(t[13]=e=>{var l;(l=N.value)&&l.validate((e=>{if(e){const e=m(C);v(e).then((()=>{_({showClose:!0,message:"操作成功！",type:"success"}),j.value.reload(),w.value=!1}))}else w.value=!1}))})},{default:d((()=>[i("保存")])),_:1})])])),default:d((()=>[p(T,{ref_key:"formRef",ref:N,model:C.value,rules:h,"label-width":"120px"},{default:d((()=>[p(S,{gutter:20},{default:d((()=>[p(I,{span:12},{default:d((()=>[p(F,{label:"登录账号",prop:"userName"},{default:d((()=>[p(o,{modelValue:C.value.userName,"onUpdate:modelValue":t[4]||(t[4]=e=>C.value.userName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1}),p(I,{span:12},{default:d((()=>[p(F,{label:"人员姓名",prop:"realName"},{default:d((()=>[p(o,{modelValue:C.value.realName,"onUpdate:modelValue":t[5]||(t[5]=e=>C.value.realName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1}),p(I,{span:12},{default:d((()=>[p(F,{label:"归属部门",prop:"deptCode"},{default:d((()=>[p(V,{modelValue:C.value.deptCode,"onUpdate:modelValue":t[6]||(t[6]=e=>C.value.deptCode=e)},null,8,["modelValue"])])),_:1})])),_:1}),p(I,{span:12},{default:d((()=>[p(F,{label:"人员角色",prop:"roles"},{default:d((()=>[p(c,{modelValue:C.value.roles,"onUpdate:modelValue":t[7]||(t[7]=e=>C.value.roles=e)},null,8,["modelValue"])])),_:1})])),_:1}),p(I,{span:12},{default:d((()=>[p(F,{label:"手机号码",prop:"mobile"},{default:d((()=>[p(o,{modelValue:C.value.mobile,"onUpdate:modelValue":t[8]||(t[8]=e=>C.value.mobile=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1}),p(I,{span:12},{default:d((()=>[p(F,{label:"身份证号",prop:"idCard"},{default:d((()=>[p(o,{modelValue:C.value.idCard,"onUpdate:modelValue":t[9]||(t[9]=e=>C.value.idCard=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1}),p(I,{span:12},{default:d((()=>[p(F,{label:"用户头像",prop:"avatar"},{default:d((()=>[p(m(b),{modelValue:C.value.avatar,"onUpdate:modelValue":t[10]||(t[10]=e=>C.value.avatar=e)},null,8,["modelValue"])])),_:1})])),_:1}),p(I,{span:12},{default:d((()=>[p(F,{label:"登录密码",prop:"password"},{default:d((()=>[p(o,{modelValue:C.value.password,"onUpdate:modelValue":t[11]||(t[11]=e=>C.value.password=e),autocomplete:"new-password",placeholder:"不修改请留空！！",type:"password"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])),_:1})}}});export{g as default};
