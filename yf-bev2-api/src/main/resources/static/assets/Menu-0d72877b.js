import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-d6cd8ae8.js";import{t as l,d as a,a as t,s,b as d}from"./index-5ea96d40.js";import{d as u,r as o,M as i,y as n,z as r,m as p,p as m,o as c,i as v,w as f,g as y,f as h,s as g,a3 as b,a as _,a6 as T,P as V,A as k,t as x,B as C,K as w,C as I,D as j,_ as U}from"./index-6345b1a2.js";/* empty css                   *//* empty css                  *//* empty css                 *//* empty css                */import"./el-tooltip-4ed993c7.js";/* empty css                  */const q=e=>(I("data-v-66df6951"),e=e(),j(),e),z={class:"search-box"},D={class:"search-items"},P={class:"opt-box"},R={class:"opt-box-left"},B={class:"opt-box-right"},M=q((()=>y("div",{class:"tree-header",style:{"flex-grow":"1"}}," 菜单名称 ",-1))),N={class:"tree-box"},W={class:"tree-item",style:{"flex-grow":"1"}},E={class:"flex items-center"},F=q((()=>y("small",null,[y("a",{href:"https://icon-sets.iconify.design/",target:"_blank"},"https://icon-sets.iconify.design/")],-1))),K={class:"dialog-footer"},L=U(u({__name:"Menu",setup(u){const I=o([]),j=o(!1),U=o(""),q=()=>{j.value=!0,l().then((e=>{I.value=e.data,j.value=!1})).catch((()=>{j.value=!1}))},L=o(!1),$=o(1),A=o({}),H=o(),Q=i({menuType:[{required:!0,message:"请选择菜单类型",trigger:"blur"}],metaTitle:[{required:!0,message:"请输入标题",trigger:"blur"}],name:[{required:!0,message:"请输入菜单英文名称！",trigger:"blur"}],component:[{required:!0,message:"请输入视图路径",trigger:"blur"}],path:[{required:!0,message:"请输入访问路径",trigger:"blur"}],permissionTag:[{required:!0,message:"请输入权限标识",trigger:"blur"}]}),S=e=>{a({id:e.id}).then((e=>{A.value=e.data,L.value=!0}))},G=()=>{L.value=!1},J=o([15,15,15,15,10,10]),O=o(),X=(e,l)=>{if(!O.value||!O.value||!O.value.clientWidth)return"100px";const a=J.value[e];return`width: ${O.value.clientWidth*a/100}px; justify-content: ${l?"center":"left"}`},Y=e=>{C.confirm("确实要删除吗?","提示信息",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{t({ids:e}).then((()=>{w({showClose:!0,message:"删除成功！",type:"success"}),q()}))}))},Z=(e,l,a)=>{if(3===e.data.menuType&&e.data.parentId!==l.data.parentId)return!1;if("inner"===a){if(3===e.data.menuType&&2!==l.data.menuType)return!1;if(2===e.data.menuType&&1!==l.data.menuType)return!1;if(1===e.data.menuType&&1!==l.data.menuType)return!1}else if(e.data.menuType!==l.data.menuType)return!1;return!0},ee=(e,l,a)=>{d({form:e.data.id,to:l.data.id,dropType:a}).then((()=>{w({showClose:!0,message:"排序成功！",type:"success"}),q()}))},le=o(),ae=(e,l)=>!e||l.metaTitle.includes(e);return n((()=>{q()})),(l,a)=>{const t=r("el-input"),d=r("el-button"),u=r("el-tag"),o=r("el-radio"),i=r("el-radio-group"),n=r("el-form-item"),C=r("el-switch"),J=r("el-form"),te=r("el-dialog"),se=p("loading");return m((c(),v(_(e),{"element-loading-text":"加载中..."},{default:f((()=>[y("div",z,[y("div",D,[h(t,{class:"filter-item",modelValue:U.value,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value=e),placeholder:"搜索菜单名称"},null,8,["modelValue"])]),h(d,{type:"primary",icon:"Search",onClick:a[1]||(a[1]=e=>{le.value.filter(U.value)})},{default:f((()=>[g("搜索")])),_:1}),h(d,{icon:"RefreshLeft",onClick:a[2]||(a[2]=e=>(U.value="",void le.value.filter(U.value)))},{default:f((()=>[g("重置")])),_:1})]),y("div",P,[y("div",R,[h(d,{type:"primary",icon:"Plus",onClick:a[3]||(a[3]=e=>{return l=H.value,$.value=1,null==l||l.resetFields(),A.value={menuType:1,parentId:"0"},void(L.value=!0);var l})},{default:f((()=>[g("添加")])),_:1}),h(d,{type:"success",icon:"Edit",onClick:a[4]||(a[4]=e=>(()=>{const e=le.value.getCurrentNode();S(e)})())},{default:f((()=>[g("修改")])),_:1}),h(d,{type:"danger",icon:"Delete",onClick:a[5]||(a[5]=e=>(()=>{const e=le.value.getCheckedKeys(!1);Y(e)})())},{default:f((()=>[g("删除")])),_:1})]),y("div",B,[h(d,{icon:"Refresh",size:"small",circle:"",onClick:q})])]),y("div",{class:"header-box",ref_key:"treeHeader",ref:O},[M,y("div",{class:"tree-header",style:b(X(0,!0))}," 菜单类型 ",4),y("div",{class:"tree-header",style:b(X(1,!1))}," 权限标识 ",4),y("div",{class:"tree-header",style:b(X(2,!1))}," 菜单路由 ",4),y("div",{class:"tree-header",style:b(X(3,!1))}," 视图组件 ",4),y("div",{class:"tree-header",style:b(X(4,!0))}," 可见状态 ",4),y("div",{class:"tree-header",style:b(X(5,!0))},"操作项",4)],512),h(_(T),{ref_key:"treeRef",ref:le,data:I.value,"allow-drop":Z,"show-checkbox":"",draggable:"","node-key":"id","check-strictly":"","default-expand-all":"","expand-on-click-node":!1,"filter-node-method":ae,"highlight-current":"",onNodeDrop:ee},{default:f((({data:e})=>[y("div",N,[y("div",W,[e.metaIcon?(c(),v(_(V),{key:0,icon:e.metaIcon},null,8,["icon"])):k("",!0),y("span",null," "+x(e.metaTitle),1)]),y("div",{class:"tree-item",style:b(X(0,!0))},[y("span",null,x(e.menuType_dictText),1)],4),y("div",{class:"tree-item",style:b(X(1,!1))},[y("span",null,x(e.permissionTag),1)],4),y("div",{class:"tree-item",style:b(X(2,!1))},[y("span",null,x(e.path),1)],4),y("div",{class:"tree-item",style:b(X(3,!1))},[y("span",null,x(e.component),1)],4),y("div",{class:"tree-item",style:b(X(4,!0))},[e.hidden?(c(),v(u,{key:1,type:"info"},{default:f((()=>[g("隐藏")])),_:1})):(c(),v(u,{key:0,type:"success"},{default:f((()=>[g("显示")])),_:1}))],4),y("div",{class:"tree-item",style:b(X(5,!0))},[h(d,{disabled:!e.id||3===e.menuType,type:"default",size:"small",circle:"",icon:"Plus",onClick:l=>{return a=e,t=H.value,$.value=a.menuType,null==t||t.resetFields(),A.value={},1===$.value&&(A.value.menuType=1),2===$.value&&(A.value.menuType=3),A.value.parentId=a.id,void(L.value=!0);var a,t}},null,8,["disabled","onClick"]),h(d,{disabled:!e.id,type:"default",size:"small",icon:"Edit",circle:"",onClick:l=>S(e)},null,8,["disabled","onClick"]),h(d,{disabled:!e.id,type:"danger",size:"small",icon:"Delete",circle:"",onClick:l=>Y(e.id)},null,8,["disabled","onClick"])],4)])])),_:1},8,["data"]),h(te,{modelValue:L.value,"onUpdate:modelValue":a[16]||(a[16]=e=>L.value=e),title:"管理菜单",width:"35%","before-close":G},{footer:f((()=>[y("span",K,[h(d,{onClick:a[14]||(a[14]=e=>L.value=!1)},{default:f((()=>[g("取消")])),_:1}),h(d,{type:"primary",onClick:a[15]||(a[15]=e=>{var l;(l=H.value)&&l.validate((e=>{e&&(3===A.value.menuType&&(A.value.hidden=!0),s(A.value).then((()=>{L.value=!1,w({showClose:!0,message:"保存成功！",type:"success"}),q()})))}))})},{default:f((()=>[g("保存")])),_:1})])])),default:f((()=>[h(J,{model:A.value,rules:Q,ref_key:"formRef",ref:H,"label-width":"120px"},{default:f((()=>[h(n,{label:"类型",prop:"menuType"},{default:f((()=>[y("div",E,[h(i,{modelValue:A.value.menuType,"onUpdate:modelValue":a[6]||(a[6]=e=>A.value.menuType=e)},{default:f((()=>[h(o,{label:1,disabled:2===$.value},{default:f((()=>[g("目录")])),_:1},8,["disabled"]),h(o,{label:2,disabled:2===$.value||"0"===A.value.parentId},{default:f((()=>[g("菜单")])),_:1},8,["disabled"]),h(o,{label:3,disabled:2!==$.value},{default:f((()=>[g("功能")])),_:1},8,["disabled"])])),_:1},8,["modelValue"])])])),_:1}),h(n,{label:"名称",prop:"metaTitle"},{default:f((()=>[h(t,{modelValue:A.value.metaTitle,"onUpdate:modelValue":a[7]||(a[7]=e=>A.value.metaTitle=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),h(n,{label:"英文名",prop:"name"},{default:f((()=>[h(t,{modelValue:A.value.name,"onUpdate:modelValue":a[8]||(a[8]=e=>A.value.name=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),h(n,{label:"视图组件",prop:"component"},{default:f((()=>[h(t,{modelValue:A.value.component,"onUpdate:modelValue":a[9]||(a[9]=e=>A.value.component=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),h(n,{label:"路由路径",prop:"path"},{default:f((()=>[h(t,{modelValue:A.value.path,"onUpdate:modelValue":a[10]||(a[10]=e=>A.value.path=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),h(n,{label:"权限标识",prop:"permissionTag"},{default:f((()=>[h(t,{modelValue:A.value.permissionTag,"onUpdate:modelValue":a[11]||(a[11]=e=>A.value.permissionTag=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),1===A.value.menuType||2===A.value.menuType?(c(),v(n,{key:0,label:"图标",prop:"metaIcon"},{default:f((()=>[h(t,{modelValue:A.value.metaIcon,"onUpdate:modelValue":a[12]||(a[12]=e=>A.value.metaIcon=e),autocomplete:"off",placeholder:"填写图标名称如: carbon:settings,请在以下链接查找"},null,8,["modelValue"]),F])),_:1})):k("",!0),h(n,{label:"是否隐藏",prop:"hidden"},{default:f((()=>[h(C,{modelValue:A.value.hidden,"onUpdate:modelValue":a[13]||(a[13]=e=>A.value.hidden=e),"inline-prompt":"",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-text":"是","inactive-text":"否"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])),_:1})),[[se,j.value]])}}}),[["__scopeId","data-v-66df6951"]]);export{L as default};
