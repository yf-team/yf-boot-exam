import{d as l,r as e,S as a,I as s,z as u,o as t,c as o,f as i,w as d,g as n,A as r,F as c,_ as m}from"./index-20708d06.js";import{v as p}from"./v4-ba5d26a9.js";const f={style:{background:"#b3b3b3"}},_=["src"],v={class:"el-upload-list__item-actions"},k=["onClick"],g=["onClick"],V=["src"],b=m(l({__name:"FileUploader",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(l,{emit:m}){const b=l,y=e(),w=e([]),C=e(""),F=e(!1),I=e(!1),h={token:a().getUserInfo.token};s((()=>b.modelValue),(l=>{w.value=[{url:l,name:l}]}));const x=l=>{y.value.clearFiles();const e=l[0];e.uid=p(),y.value.handleStart(e),y.value.submit()},S=l=>{m("update:modelValue",l.data.url)};return(l,e)=>{const a=u("Plus"),s=u("el-icon"),m=u("zoom-in"),p=u("Delete"),b=u("el-upload"),U=u("el-dialog");return t(),o(c,null,[i(b,{ref_key:"uploadRef",ref:y,action:"/api/common/file/upload",headers:h,limit:1,"file-list":w.value,"on-exceed":x,"on-success":S,"list-type":"picture-card","auto-upload":!0},{file:d((({file:l})=>[n("div",f,[l&&l.url?(t(),o("img",{key:0,class:"el-upload-list__item-thumbnail",src:l.url,alt:""},null,8,_)):r("",!0),n("span",v,[n("span",{class:"el-upload-list__item-preview",onClick:e=>(l=>{C.value=l.url,F.value=!0})(l)},[i(s,null,{default:d((()=>[i(m)])),_:1})],8,k),I.value?r("",!0):(t(),o("span",{key:0,class:"el-upload-list__item-delete",onClick:l=>{w.value=[]}},[i(s,null,{default:d((()=>[i(p)])),_:1})],8,g))])])])),default:d((()=>[i(s,null,{default:d((()=>[i(a)])),_:1})])),_:1},8,["file-list"]),i(U,{modelValue:F.value,"onUpdate:modelValue":e[0]||(e[0]=l=>F.value=l)},{default:d((()=>[n("img",{"w-full":"",src:C.value,alt:"Preview Image"},null,8,V)])),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-376e5fa1"]]);export{b as F};
