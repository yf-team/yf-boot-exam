import{d as e,u as a,x as l,r as t,y as u,z as d,o as n,i as s,w as i,f as c,g as o,a as r,s as v,c as p,F as h,G as f,t as y,n as k,A as m,_ as q}from"./index-20708d06.js";import{q as I,a as g,h as _,f as x}from"./index-c8e8dcfa.js";import T from"./ExamTimer-78acd98b.js";const w={class:"top-opt-box"},C=["innerHTML"],L=["onClick"],b={key:0},j=["checked"],z={key:1},E=["checked"],O={style:{"text-align":"center","padding-top":"20px"}},H=q(e({__name:"Enter",setup(e){const{push:q}=a(),H=l().query.id,M=t({});let R=t(),S=t([]);const A=t(!1),B=t(!1),F=()=>{const e=S.value.indexOf(M.value.quId);D(S.value[e+1])},G=()=>{const e=S.value.indexOf(M.value.quId);D(S.value[e-1])},D=e=>{const a=S.value.indexOf(e);B.value=a>0,A.value=a<S.value.length-1,g({paperId:H,quId:e}).then((e=>{M.value=e.data}))},J=()=>{const e=[];if(!R.value||0===R.value.length)return[];for(let a=0;a<R.value.length;a++){const l=R.value[a].itemList;for(let a=0;a<l.length;a++)e.push(l[a].quId)}S.value=e,D(e[0])},K=()=>{_({id:H}).then((()=>{q({name:"ExamClientResult",query:{id:H}})}))},N=e=>e.quId===M.value.quId?"danger":e.answered?"primary":"info",P=()=>{const e=[];for(const l of M.value.answerList)l.checked&&e.push(l.answerId);const a={paperId:H,quId:M.value.quId,checkedItems:e};x(a).then((e=>{((e,a)=>{for(const l of R.value){const t=l.itemList;for(const l of t)l.quId===e&&(l.answered=a)}})(M.value.quId,e.data.filled)}))};return u((()=>{I({id:H}).then((e=>{R.value=e.data,J()}))})),(e,a)=>{const l=d("el-button"),t=d("el-card"),u=d("el-col"),q=d("el-tag"),I=d("el-row");return n(),s(I,{gutter:20},{default:i((()=>[c(u,{span:24},{default:i((()=>[c(t,null,{default:i((()=>[o("div",w,[c(T,{paperId:r(H)},null,8,["paperId"]),c(l,{icon:"Select",size:"large",type:"primary",onClick:K},{default:i((()=>[v("立即交卷 ")])),_:1})])])),_:1})])),_:1}),c(u,{span:4},{default:i((()=>[c(t,{style:{height:"70vh"}},{default:i((()=>[(n(!0),p(h,null,f(r(R),(e=>(n(),p("div",{key:null==e?void 0:e.quType},[o("h3",null,y(null==e?void 0:e.quType_dictText),1),(n(!0),p(h,null,f(null==e?void 0:e.itemList,((e,a)=>(n(),s(q,{key:a,class:k([{"ml-2":a>0},"tag-item"]),type:N(e),size:"large",onClick:a=>D(e.quId)},{default:i((()=>[v(y(a+1),1)])),_:2},1032,["class","type","onClick"])))),128))])))),128))])),_:1})])),_:1}),c(u,{span:20},{default:i((()=>[c(t,{style:{height:"70vh"}},{default:i((()=>[o("h3",null,y(M.value.quType_dictText),1),o("div",{innerHTML:M.value.content},null,8,C),o("div",null,[(n(!0),p(h,null,f(M.value.answerList,(e=>(n(),p("div",{key:e.answerId,class:k([{checked:e.checked},"answer-item"]),onClick:a=>(e=>{if(e.checked=!e.checked,"radio"===M.value.quType||"judge"===M.value.quType)for(const a of M.value.answerList)a.answerId!==e.answerId&&(a.checked=!1);P()})(e)},["multi"===M.value.quType?(n(),p("div",b,[o("input",{checked:e.checked,type:"checkbox"},null,8,j)])):m("",!0),"radio"===M.value.quType||"judge"===M.value.quType?(n(),p("div",z,[o("input",{checked:e.checked,type:"radio"},null,8,E)])):m("",!0),o("div",null,y(e.content),1)],10,L)))),128))]),o("div",O,[c(l,{disabled:!B.value,icon:"Back",size:"large",type:"primary",onClick:G},{default:i((()=>[v("上一题 ")])),_:1},8,["disabled"]),c(l,{disabled:!A.value,icon:"Right",size:"large",type:"primary",onClick:F},{default:i((()=>[v("下一题 ")])),_:1},8,["disabled"])])])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-d7e028d5"]]);export{H as default};
