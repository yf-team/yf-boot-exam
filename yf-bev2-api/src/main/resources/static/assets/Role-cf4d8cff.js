import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-d6cd8ae8.js";import{_ as l}from"./DataTable.vue_vue_type_script_setup_true_lang-869d95df.js";import{d as a,r as o,M as t,z as r,o as u,i as s,w as i,f as d,a as p,s as m,g as n,K as v}from"./index-6345b1a2.js";import{_ as c}from"./DictListSelect.vue_vue_type_script_setup_true_lang-2040b1f2.js";import{s as _}from"./index-7aa57948.js";import f from"./Grant-8846a4fc.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 */import"./index-12b430d8.js";import"./index-5ea96d40.js";/* empty css                */const b=n("div",null,[n("small",null,"数字越大级别越大，数字小的角色不能修改数字高角色的数据")],-1),g={class:"dialog-footer"},V=a({__name:"Role",setup(a){let V=o({current:1,size:10,params:{title:""}}),y=o({listUrl:"/api/sys/role/paging",delUrl:"/api/sys/role/delete",add:{enable:!0,permission:["role:add"]},edit:{enable:!0,permission:["role:edit"]},del:{enable:!0,permission:["role:delete"]}});const j=o(),x=o(!1),U=o({}),h=o(),N=t({roleName:[{required:!0,message:"角色名称必须输入",trigger:"blur"}],dataScope:[{required:!0,message:"数据权限必须选择",trigger:"blur"}],roleLevel:[{required:!0,message:"角色级别不能为空",trigger:"blur"}]}),w=()=>{x.value=!1},L=e=>{x.value=!0,U.value=e},S=o(!1),k=o("");return(a,o)=>{const t=r("el-input"),C=r("el-table-column"),q=r("el-button"),z=r("el-form-item"),R=r("el-input-number"),T=r("el-form"),A=r("el-dialog");return u(),s(p(e),null,{default:i((()=>[d(p(l),{ref_key:"tableRef",ref:j,options:p(y),query:p(V),onOnAdd:o[1]||(o[1]=e=>{return l=h.value,x.value=!0,U.value={},void(null==l||l.resetFields());var l}),onOnEdit:L},{search:i((()=>[d(t,{modelValue:p(V).params.roleName,"onUpdate:modelValue":o[0]||(o[0]=e=>p(V).params.roleName=e),class:"filter-item",clearable:"",placeholder:"搜索角色名称"},null,8,["modelValue"])])),columns:i((()=>[d(C,{type:"selection",width:"50px"}),d(C,{label:"角色名称",prop:"roleName"}),d(C,{label:"角色级别",prop:"roleLevel"}),d(C,{label:"数据权限",prop:"dataScope_dictText"}),d(C,{align:"center",label:"操作",width:"180px"},{default:i((e=>[d(q,{icon:"Setting",size:"small",type:"primary",onClick:l=>{return a=e.row,S.value=!0,void(k.value=a.id);var a}},{default:i((()=>[m("角色授权 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["options","query"]),d(A,{modelValue:x.value,"onUpdate:modelValue":o[7]||(o[7]=e=>x.value=e),"before-close":w,title:"角色管理",width:"30%"},{footer:i((()=>[n("span",g,[d(q,{onClick:o[5]||(o[5]=e=>x.value=!1)},{default:i((()=>[m("取消")])),_:1}),d(q,{type:"primary",onClick:o[6]||(o[6]=e=>{var l;(l=h.value)&&l.validate((e=>{if(e){const e=p(U);_(e).then((()=>{v({showClose:!0,message:"操作成功！",type:"success"}),j.value.reload(),x.value=!1}))}else x.value=!1}))})},{default:i((()=>[m("保存")])),_:1})])])),default:i((()=>[d(T,{ref_key:"formRef",ref:h,model:U.value,rules:N,"label-width":"120px"},{default:i((()=>[d(z,{label:"角色名称",prop:"roleName"},{default:i((()=>[d(t,{modelValue:U.value.roleName,"onUpdate:modelValue":o[2]||(o[2]=e=>U.value.roleName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),d(z,{label:"数据权限",prop:"dataScope"},{default:i((()=>[d(c,{modelValue:U.value.dataScope,"onUpdate:modelValue":o[3]||(o[3]=e=>U.value.dataScope=e),"dic-code":"data_scope"},null,8,["modelValue"])])),_:1}),d(z,{label:"角色级别",prop:"roleLevel"},{default:i((()=>[d(R,{modelValue:U.value.roleLevel,"onUpdate:modelValue":o[4]||(o[4]=e=>U.value.roleLevel=e),max:999,min:0,autocomplete:"off"},null,8,["modelValue"]),b])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),d(f,{modelValue:S.value,"onUpdate:modelValue":o[8]||(o[8]=e=>S.value=e),"role-id":k.value},null,8,["modelValue","role-id"])])),_:1})}}});export{V as default};
