import{d as e,r as a,e as l,I as s,J as u,o as n,c as t,t as r,A as v,g as o,n as d,_ as p,u as c,y as i,f,a as m,K as I,C as _,D as w}from"./index-20708d06.js";import{r as y}from"./index-c8e8dcfa.js";const x={key:0},S={key:1},h=p(e({__name:"CountDown",props:{leftSeconds:{type:Number,required:!0,validator:e=>e>=0}},emits:["overdue","warn"],setup(e,{expose:p,emit:c}){const i=e,f=a(i.leftSeconds),m=a(!1);let I=null;const _=l((()=>Math.floor(f.value/3600))),w=l((()=>Math.floor(f.value%3600/60))),y=l((()=>f.value%60)),h=l((()=>_.value>0)),b=l((()=>w.value>0||h.value)),g=l((()=>f.value<300&&f.value>0)),C=()=>{f.value<300&&f.value>0&&!m.value&&(c("warn"),m.value=!0)},j=()=>{I&&clearInterval(I),C(),I=setInterval((()=>{f.value>0?(f.value--,C()):(k(),c("overdue"))}),1e3)},k=()=>{I&&(clearInterval(I),I=null)},q=e=>{f.value=e,m.value=e<300,e<300&&e>0?m.value||(c("warn"),m.value=!0):e>=300&&(m.value=!1),j()};return s((()=>i.leftSeconds),(e=>{q(e)})),j(),u(k),p({setLeftSeconds:q}),(e,a)=>(n(),t("span",{class:d([{warning:g.value},"countdown"])},[h.value?(n(),t("span",x,r(_.value)+"小时",1)):v("",!0),b.value?(n(),t("span",S,r(w.value)+"分钟",1)):v("",!0),o("span",null,r(y.value)+"秒",1)],2))}}),[["__scopeId","data-v-7afc94a6"]]),b={class:"count-box"},g=(e=>(_("data-v-47569d9b"),e=e(),w(),e))((()=>o("span",{style:{}},"剩余考试时间：",-1))),C={style:{color:"#409eff"}},j=p(e({__name:"ExamTimer",props:{paperId:{type:String,default:null}},emits:["overdue","warn"],setup(e,{emit:l}){const s=e,{push:r}=c(),v=a(999999999),d=()=>{l("warn"),I.error("剩余考试时间已不足5分钟，请合理安排时间！")},p=()=>{l("overdue")},_=()=>{y({id:s.paperId}).then((e=>{const a=e.data;if(a.handed)return I.error("当前试卷已被提交、无法继续答题！"),void setTimeout((()=>{r({name:"ExamClientResult",query:{id:s.paperId}})}),2e3);v.value=a.leftSeconds}))},w=a(null);return i((()=>{_(),w.value=setInterval((()=>{_()}),6e4)})),u((()=>{w.value&&(clearInterval(w.value),w.value=null)})),(e,a)=>(n(),t("div",b,[g,o("span",C,[f(m(h),{"left-seconds":v.value,onOverdue:p,onWarn:d},null,8,["left-seconds"])])]))}}),[["__scopeId","data-v-47569d9b"]]);export{j as default};
