import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-d93320da.js";import{d as a,r as l,I as t,y as s,z as o,m as d,o as u,i as n,w as r,g as p,f as i,s as c,p as m,a as f,a6 as v,K as _,_ as h}from"./index-20708d06.js";import{t as y}from"./index-491df2fc.js";import{l as k,a as g}from"./index-2f88eca2.js";/* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  */const x={class:"dialog-footer"},j=h(a({__name:"Grant",props:{modelValue:{type:Boolean,default:!1},roleId:{type:String,default:""}},emits:["update:modelValue"],setup(a,{emit:h}){const j=a,I=l(),V=l(!1);t((()=>j.roleId),(e=>{e&&T()})),t((()=>j.modelValue),(e=>{V.value=e}));const w=l(!1),b=l(!1),C=l([]),K=l([]),T=async()=>{w.value=!0,K.value=[],await y().then((e=>{C.value=e.data})),await k({id:j.roleId}).then((e=>{K.value=e.data})),w.value=!1},z=()=>{V.value=!1,h("update:modelValue",!1)},B=()=>{b.value=!0;const e=I.value.getCheckedKeys(!1);g({id:j.roleId,menuIds:e}).then((()=>{_({showClose:!0,message:"授权保存成功！",type:"success"}),b.value=!1,z()}))},G=e=>2===e.menuType&&e.children&&e.children.length>0?"is-menu":null;return s((()=>{T()})),(a,l)=>{const t=o("el-button"),s=o("el-dialog"),_=d("loading");return u(),n(s,{modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=e=>V.value=e),title:"角色授权",width:"50%","before-close":z},{footer:r((()=>[p("span",x,[i(t,{onClick:z},{default:r((()=>[c("取消")])),_:1}),i(t,{type:"primary",onClick:B,loading:b.value},{default:r((()=>[c("保存")])),_:1},8,["loading"])])])),default:r((()=>[m((u(),n(f(e),null,{default:r((()=>[i(f(v),{ref_key:"treeRef",ref:I,data:C.value,"default-checked-keys":K.value,"show-checkbox":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1,props:{class:G,label:"metaTitle"}},null,8,["data","default-checked-keys","props"])])),_:1})),[[_,w.value]])])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-c14f7f0a"]]);export{j as default};
