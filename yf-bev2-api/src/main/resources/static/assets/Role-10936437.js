import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-d93320da.js";import{_ as l}from"./DataTable.vue_vue_type_script_setup_true_lang-0f422246.js";import{d as a,r as o,M as r,z as t,o as u,i as s,w as i,f as d,a as p,s as m,g as n,K as v}from"./index-20708d06.js";import{_ as c}from"./DictListSelect.vue_vue_type_script_setup_true_lang-9024d082.js";import{s as _}from"./index-2f88eca2.js";import f from"./Grant-b53755ea.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 */import"./index-77bd7a66.js";import"./index-491df2fc.js";/* empty css                    */const b=n("div",null,[n("small",null,"数字越大级别越大，数字小的角色不能修改数字高角色的数据")],-1),g={class:"dialog-footer"},V=a({__name:"Role",setup(a){let V=o({current:1,size:10,params:{title:""}}),y=o({listUrl:"/api/sys/role/paging",delUrl:"/api/sys/role/delete",add:{enable:!0,permission:["role:add"]},edit:{enable:!0,permission:["role:edit"]},del:{enable:!0,permission:["role:delete"]}});const j=o(),x=o(!1),h=o({}),U=o(),N=r({roleName:[{required:!0,message:"角色名称必须输入",trigger:"blur"}],dataScope:[{required:!0,message:"数据权限必须选择",trigger:"blur"}],roleLevel:[{required:!0,message:"角色级别不能为空",trigger:"blur"}]}),k=()=>{x.value=!1},w=e=>{x.value=!0,h.value=e},L=o(!1),S=o("");return(a,o)=>{const r=t("el-input"),C=t("el-table-column"),q=t("el-button"),z=t("el-form-item"),R=t("el-input-number"),T=t("el-form"),A=t("el-dialog");return u(),s(p(e),null,{default:i((()=>[d(p(l),{ref_key:"tableRef",ref:j,options:p(y),query:p(V),onOnAdd:o[1]||(o[1]=e=>{return l=U.value,x.value=!0,h.value={},void(null==l||l.resetFields());var l}),onOnEdit:w},{search:i((()=>[d(r,{modelValue:p(V).params.roleName,"onUpdate:modelValue":o[0]||(o[0]=e=>p(V).params.roleName=e),class:"filter-item",clearable:"",placeholder:"搜索角色名称"},null,8,["modelValue"])])),columns:i((()=>[d(C,{type:"selection",width:"50px"}),d(C,{label:"角色名称",prop:"roleName"}),d(C,{label:"角色级别",prop:"roleLevel"}),d(C,{label:"数据权限",prop:"dataScope_dictText"}),d(C,{align:"center",label:"操作",width:"180px"},{default:i((e=>[d(q,{icon:"Setting",size:"small",type:"primary",onClick:l=>{return a=e.row,L.value=!0,void(S.value=a.id);var a}},{default:i((()=>[m("角色授权 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["options","query"]),d(A,{modelValue:x.value,"onUpdate:modelValue":o[7]||(o[7]=e=>x.value=e),"before-close":k,title:"角色管理",width:"30%"},{footer:i((()=>[n("span",g,[d(q,{onClick:o[5]||(o[5]=e=>x.value=!1)},{default:i((()=>[m("取消")])),_:1}),d(q,{type:"primary",onClick:o[6]||(o[6]=e=>{var l;(l=U.value)&&l.validate((e=>{if(e){const e=p(h);_(e).then((()=>{v({showClose:!0,message:"操作成功！",type:"success"}),j.value.reload(),x.value=!1}))}else x.value=!1}))})},{default:i((()=>[m("保存")])),_:1})])])),default:i((()=>[d(T,{ref_key:"formRef",ref:U,model:h.value,rules:N,"label-width":"120px"},{default:i((()=>[d(z,{label:"角色名称",prop:"roleName"},{default:i((()=>[d(r,{modelValue:h.value.roleName,"onUpdate:modelValue":o[2]||(o[2]=e=>h.value.roleName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),d(z,{label:"数据权限",prop:"dataScope"},{default:i((()=>[d(c,{modelValue:h.value.dataScope,"onUpdate:modelValue":o[3]||(o[3]=e=>h.value.dataScope=e),"dic-code":"data_scope"},null,8,["modelValue"])])),_:1}),d(z,{label:"角色级别",prop:"roleLevel"},{default:i((()=>[d(R,{modelValue:h.value.roleLevel,"onUpdate:modelValue":o[4]||(o[4]=e=>h.value.roleLevel=e),max:999,min:0,autocomplete:"off"},null,8,["modelValue"]),b])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),d(f,{modelValue:L.value,"onUpdate:modelValue":o[8]||(o[8]=e=>L.value=e),"role-id":S.value},null,8,["modelValue","role-id"])])),_:1})}}});export{V as default};
