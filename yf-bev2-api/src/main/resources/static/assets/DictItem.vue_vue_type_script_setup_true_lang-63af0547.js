import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-d6cd8ae8.js";import{_ as l}from"./DataTable.vue_vue_type_script_setup_true_lang-869d95df.js";import{d as a,r as t,M as o,z as r,o as u,i as d,w as i,f as s,a as p,s as m,a5 as n,g as c,K as _}from"./index-6345b1a2.js";import{s as v}from"./index-12b430d8.js";import{_ as f}from"./DictValue.vue_vue_type_script_setup_true_lang-812031f2.js";import{_ as y}from"./DictListSelect.vue_vue_type_script_setup_true_lang-2040b1f2.js";const V={class:"dialog-footer"},b=a({__name:"DictItem",setup(a){let b=t({current:1,size:10,params:{}}),g=t(!1);const C=t({}),U=t(),k=o({type:[{required:!0,message:"类型必须选择！",trigger:"blur"}],title:[{required:!0,message:"请输入字典名称！",trigger:"blur"}],dicCode:[{required:!0,validator:(e,l,a)=>{if(!l)return a(new Error("编码必须填写！"));a()},trigger:"blur"}]});let w=t({listUrl:"/api/sys/dic/paging",delUrl:"/api/sys/dic/delete",add:{enable:!0,permission:["role:add"]},edit:{enable:!0,permission:["role:edit"]},del:{enable:!0,permission:[""]}});const h=t(),x=()=>{g.value=!1,q.value=!1},j=e=>{g.value=!0,C.value=e},q=t(!1),z=t(""),D=t(0);return(a,t)=>{const o=r("el-input"),E=r("el-table-column"),O=r("el-button"),R=r("el-form-item"),T=r("el-form"),W=r("el-dialog"),A=r("el-drawer");return u(),d(p(e),null,{default:i((()=>[s(p(l),{ref_key:"tableRef",ref:h,options:p(w),query:p(b),onOnAdd:t[2]||(t[2]=e=>{return l=U.value,C.value={},g.value=!0,void(null==l||l.resetFields());var l}),onOnEdit:j},{search:i((()=>[s(y,{modelValue:p(b).params.type,"onUpdate:modelValue":t[0]||(t[0]=e=>p(b).params.type=e),class:"filter-item","dic-code":"dic_type"},null,8,["modelValue"]),s(o,{modelValue:p(b).params.title,"onUpdate:modelValue":t[1]||(t[1]=e=>p(b).params.title=e),class:"filter-item",placeholder:"搜名称或编码"},null,8,["modelValue"])])),columns:i((()=>[s(E,{type:"selection",width:"50px"}),s(E,{label:"名称",prop:"title",sortable:""}),s(E,{label:"类型",prop:"type_dictText",sortable:""}),s(E,{label:"编码",prop:"dicCode",sortable:""}),s(E,{label:"备注信息",prop:"remark"}),s(E,{align:"center",label:"操作",width:"180px"},{default:i((e=>[s(O,{size:"small",type:"primary",onClick:l=>{return a=e.row,z.value=a.dicCode,D.value=a.type,void(q.value=!0);var a}},{default:i((()=>[m("字典项")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["options","query"]),s(W,{modelValue:p(g),"onUpdate:modelValue":t[9]||(t[9]=e=>n(g)?g.value=e:g=e),"before-close":x,title:"保存数据字典",width:"30%"},{footer:i((()=>[c("span",V,[s(O,{onClick:t[7]||(t[7]=e=>n(g)?g.value=!1:g=!1)},{default:i((()=>[m("取消")])),_:1}),s(O,{type:"primary",onClick:t[8]||(t[8]=e=>{var l;(l=U.value)&&l.validate((e=>{if(e){const e=p(C);v(e).then((()=>{_({showClose:!0,message:"操作成功！",type:"success"}),g.value=!1,h.value.reload()}))}else g.value=!1}))})},{default:i((()=>[m("保存")])),_:1})])])),default:i((()=>[s(T,{ref_key:"formRef",ref:U,model:C.value,rules:k,"label-width":"120px"},{default:i((()=>[s(R,{label:"类型",prop:"type"},{default:i((()=>[s(y,{modelValue:C.value.type,"onUpdate:modelValue":t[3]||(t[3]=e=>C.value.type=e),"dic-code":"dic_type"},null,8,["modelValue"])])),_:1}),s(R,{label:"名称",prop:"title"},{default:i((()=>[s(o,{modelValue:C.value.title,"onUpdate:modelValue":t[4]||(t[4]=e=>C.value.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(R,{label:"编码",prop:"dicCode"},{default:i((()=>[s(o,{modelValue:C.value.dicCode,"onUpdate:modelValue":t[5]||(t[5]=e=>C.value.dicCode=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(R,{label:"备注"},{default:i((()=>[s(o,{modelValue:C.value.remark,"onUpdate:modelValue":t[6]||(t[6]=e=>C.value.remark=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),s(A,{modelValue:q.value,"onUpdate:modelValue":t[10]||(t[10]=e=>q.value=e),"before-close":x,"close-on-click-modal":!1,direction:"rtl",size:"50%",title:"配置字典项"},{default:i((()=>[s(f,{"dic-code":z.value,"dict-type":D.value},null,8,["dic-code","dict-type"])])),_:1},8,["modelValue"])])),_:1})}}});export{b as _};
