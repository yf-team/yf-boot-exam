import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-d6cd8ae8.js";import{_ as a}from"./DataTable.vue_vue_type_script_setup_true_lang-869d95df.js";import{L as l,d as t,r as o,z as s,o as u,i as p,w as i,f as r,a as n,s as d,g as m,c,F as _,G as f,K as v}from"./index-6345b1a2.js";import{_ as g}from"./DictListSelect.vue_vue_type_script_setup_true_lang-2040b1f2.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 */import"./index-12b430d8.js";const y={class:"dialog-footer"},b=t({__name:"Plugin",setup(t){let b=o({current:1,size:10,params:{title:"",deptCode:""}});const h=o();let V=o({listUrl:"/api/sys/plugin/data/paging"});const j=o(),k=o(!1),w=o({}),x=o(),C=o(),D=e=>{C.value=e,(e=>l.post({url:"/api/sys/plugin/schema/detail",data:e}))({id:e.schemaId}).then((e=>{h.value=JSON.parse(e.data.schemaData)})),e.configData?w.value=e.configData:w.value={},k.value=!0},U=()=>{k.value=!1},I=e=>{e&&e.validate((e=>{if(e){const e={id:C.value.id,configData:n(w)};(a=e,l.post({url:"/api/sys/plugin/data/save",data:a})).then((()=>{v({showClose:!0,message:"配置保存成功！",type:"success"}),j.value.reload(),k.value=!1}))}else k.value=!1;var a}))};return(l,t)=>{const o=s("el-table-column"),v=s("el-tag"),C=s("el-button"),z=s("el-input"),L=s("el-form-item"),S=s("el-form"),T=s("ElDialog");return u(),p(n(e),null,{default:i((()=>[r(n(a),{ref_key:"table",ref:j,options:n(V),query:n(b)},{search:i((()=>[r(g,{modelValue:n(b).params.groupId,"onUpdate:modelValue":t[0]||(t[0]=e=>n(b).params.groupId=e),class:"filter-item","dic-code":"plugin_group"},null,8,["modelValue"])])),columns:i((()=>[r(o,{type:"selection",width:"50px"}),r(o,{label:"插件编号",prop:"code"}),r(o,{label:"插件名称",prop:"title"}),r(o,{label:"插件类型",prop:"groupId_dictText"}),r(o,{align:"center",label:"使用状态",width:"180px"},{default:i((e=>[e.row.inUse?(u(),p(v,{key:0,type:"success"},{default:i((()=>[d("使用中")])),_:1})):(u(),p(v,{key:1,type:"danger"},{default:i((()=>[d("未使用")])),_:1}))])),_:1}),r(o,{align:"center",label:"操作项",width:"180px"},{default:i((e=>[r(C,{circle:"",icon:"Setting",size:"small",type:"primary",onClick:a=>D(e.row)},null,8,["onClick"])])),_:1})])),_:1},8,["options","query"]),r(T,{modelValue:k.value,"onUpdate:modelValue":t[3]||(t[3]=e=>k.value=e),"before-close":U,title:"配置插件",width:"40%"},{footer:i((()=>[m("span",y,[r(C,{onClick:t[1]||(t[1]=e=>k.value=!1)},{default:i((()=>[d("取消")])),_:1}),r(C,{type:"primary",onClick:t[2]||(t[2]=e=>I(x.value))},{default:i((()=>[d("保存")])),_:1})])])),default:i((()=>[r(S,{ref_key:"formRef",ref:x,model:w.value,"label-width":"150px"},{default:i((()=>[(u(!0),c(_,null,f(h.value,(e=>(u(),p(L,{key:e.name,label:e.title,prop:e.name},{default:i((()=>[r(z,{modelValue:w.value[e.name||"none"],"onUpdate:modelValue":a=>w.value[e.name||"none"]=a,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","prop"])))),128))])),_:1},8,["model"])])),_:1},8,["modelValue"])])),_:1})}}});export{b as default};
